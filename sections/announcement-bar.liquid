{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'announcement' -%}
      <div class="announcement-bar color-{{ block.settings.color_scheme }} gradient" role="region" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>
        {%- if block.settings.text != blank -%}
          {%- if block.settings.link != blank -%}
            <a href="{{ block.settings.link }}" class="announcement-bar__link link link--text focus-inset animate-arrow">
          {%- endif -%}
              <div class="page-width">
                <p class="announcement-bar__message {{ block.settings.text_alignment }} h5">
                  <span>{{ block.settings.text | escape }}</span>
                  {%- if block.settings.link != blank -%}
                    {% render 'icon-arrow' %}
                  {%- endif -%}
                </p>
              </div>
          {%- if block.settings.link != blank -%}
            </a>
          {%- endif -%}
        {%- endif -%}
      </div>
    {%- when 'nextgen-announcement' -%}
      {% capture star %}
        <svg width="15px" height="15px" viewBox="0 10 220 230" version="1.1">
          <g>
            <path
               style="fill:{{ block.settings.star_color }};stroke-width:0.38597062"
               d="m 44.414029,229.97786 c 0.134708,-0.4229 5.369837,-16.57441 11.633618,-35.89224 6.263774,-19.31783 11.389208,-35.22303 11.389856,-35.34489 6e-4,-0.12186 -13.627425,-10.10885 -30.284593,-22.19331 C 20.495742,124.46295 6.861328,114.4454 6.8542182,114.28619 c -0.00714,-0.15921 16.9141638,-0.28948 37.6028298,-0.28948 h 37.61576 L 86.692547,99.812289 C 89.233406,92.010857 94.482871,75.86053 98.358024,63.922675 102.23318,51.984819 105.44167,42.258358 105.488,42.308319 c 0.0463,0.04996 3.241,9.817297 7.09925,21.705193 3.85825,11.887896 9.09366,27.997345 11.63425,35.798777 l 4.61925,14.184421 h 37.61576 c 20.68866,0 37.61187,0.13027 37.60712,0.28948 -0.005,0.15921 -13.63917,10.18017 -30.2987,22.26877 -16.65953,12.08862 -30.28952,22.07561 -30.28888,22.19332 6e-4,0.11771 5.20686,16.26994 11.56938,35.89387 6.36252,19.62392 11.52918,35.71689 11.48145,35.76215 -0.0477,0.0452 -13.80065,-9.87859 -30.56209,-22.05301 l -30.47534,-22.1353 -1.75321,1.26005 c -4.302129,3.09201 -58.547531,42.46571 -59.029017,42.84586 -0.432612,0.34156 -0.490102,0.2741 -0.293194,-0.34404 z"
               id="path826" />
          </g>
        </svg>
      {% endcapture %}
    
      <div class="announcement-bar color-{{ block.settings.color_scheme }} gradient" role="region" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>

        <div class="page-width announcement-inner">
          
          {% comment %}Text 1{% endcomment %}
          {%- if block.settings.text_1 != blank -%}
            <span class="announcement-item">
                <p class="announcement-bar__message">
                  <span>{{ block.settings.text_1 }}</span>
                </p>
            </span>
          {%- endif -%}


          
          {% comment %}Text 2{% endcomment %}
          {%- if block.settings.text_2 != blank -%}
            <span class="announcement-item">
                <p class="announcement-bar__message">
                  
                  <span class="announcement-stars" style="display: inline-flex;">
            {% for i in (1..block.settings.star_amt) %}
                   {{ star }}
                  {% endfor %}
            </span>
                  
                  <span>{{ block.settings.text_2  }}</span>
                </p>
            </span>
          {%- endif -%}


          
          {% comment %}Text 3{% endcomment %}
          {%- if block.settings.text_3 != blank -%}
            <span class="announcement-item">
                <p class="announcement-bar__message">
                  <span>{{ block.settings.text_3 }}</span>
                </p>
            </span>
          {%- endif -%}



          </div><!--         Close announcement inner -->


      </div>
      
  {%- endcase -%}
{%- endfor -%}


<style>
  .announcement-inner {
    padding-block: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    {% if section.settings.uppercase %}text-transform:uppercase;{% endif %}
    {% if section.settings.bold %}font-family: var(--font-heading-family);{% endif %}
    font-weight: 600;
    
  }

  .announcement-inner .announcement-item {
    padding-inline: 10px;
    position: relative;
  }

  .announcement-inner .announcement-item:before {
    content: '';
    display: block;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 20px;
    border-left: 1px solid rgb(var(--color-foreground));
    padding-inline: 10px;
    pointer-events: none;
  }

  .announcement-inner .announcement-item:first-child:before {
    content: '';
    border-left: 0px solid black;
  }

  .announcement-inner .announcement-item .announcement-bar__message {
    font-size: calc(var(--font-heading-scale) * 1.3rem);
    line-height: calc(var(--font-heading-scale) * 1.5rem);
    text-align: center;
    padding-block: 3px;
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    align-items: center;
    justify-content: center;
  }

  .announcement-inner .announcement-item .announcement-bar__message a{
    color: inherit;
    text-decoration: none;
  }

  .announcement-stars{
    margin-top: -3px;
  }

  @media screen and (max-width: 768px){
    .announcement-inner .announcement-item .announcement-bar__message {
      font-size: calc(var(--font-heading-scale) * 1rem);
      line-height: calc(var(--font-heading-scale) * 1.1rem);
    }
    
    .announcement-inner .announcement-item {
      padding-inline: 10px;
      position: relative;
      flex: 1 1 0;
      width: 0;
    }
  
    .announcement-inner .announcement-item:nth-child(2) {
      flex: 2 1 0;
      width: 0;
    }
  }

  
</style>

{% schema %}
{
  "name": "t:sections.announcement-bar.name",
  "max_blocks": 12,
  "class": "announcement-bar-section",
  "settings": [
    {
      "type": "checkbox",
      "id": "uppercase",
      "label": "Uppercase Text",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "bold",
      "label": "Bold Text",
      "default": false
    }

  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "t:sections.announcement-bar.blocks.announcement.name",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "default": "Welcome to our store",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_alignment",
          "options": [
            {
              "value": "left",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__1.label"
            },
            {
              "value": "center",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__2.label"
            },
            {
              "value": "right",
              "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.options__3.label"
            }
          ],
          "default": "center",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.text_alignment.label"
        },
        {
          "type": "select",
          "id": "color_scheme",
          "options": [
            {
              "value": "accent-1",
              "label": "t:sections.all.colors.accent_1.label"
            },
            {
              "value": "accent-2",
              "label": "t:sections.all.colors.accent_2.label"
            },
            {
              "value": "background-1",
              "label": "t:sections.all.colors.background_1.label"
            },
            {
              "value": "background-2",
              "label": "t:sections.all.colors.background_2.label"
            },
            {
              "value": "inverse",
              "label": "t:sections.all.colors.inverse.label"
            }
          ],
          "default": "accent-1",
          "label": "t:sections.all.colors.label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.announcement-bar.blocks.announcement.settings.link.label"
        }
      ]
    },
    {
      "type": "nextgen-announcement",
      "name": "Nextgen Announcement",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "text_1",
          "default": "Free Shipping",
          "label": "Text 1"
        },
        {
          "type": "inline_richtext",
          "id": "text_2",
          "default": "Trusted By Thousands",
          "label": "Text 2"
        },
        {
          "type": "range",
          "id": "star_amt",
          "min": 0,
          "max": 5,
          "step": 1,
          "unit": "str",
          "label": "Amount of Stars",
          "default": 5
        },
        {
          "type": "color",
          "id": "star_color",
          "label": "Star Color",
          "default": "#000000"
        },
        {
          "type": "inline_richtext",
          "id": "text_3",
          "default": "Easy Returns",
          "label": "Text 3"
        },
        {
          "type": "select",
          "id": "color_scheme",
          "options": [
            {
              "value": "accent-1",
              "label": "t:sections.all.colors.accent_1.label"
            },
            {
              "value": "accent-2",
              "label": "t:sections.all.colors.accent_2.label"
            },
            {
              "value": "background-1",
              "label": "t:sections.all.colors.background_1.label"
            },
            {
              "value": "background-2",
              "label": "t:sections.all.colors.background_2.label"
            },
            {
              "value": "inverse",
              "label": "t:sections.all.colors.inverse.label"
            }
          ],
          "default": "accent-1",
          "label": "t:sections.all.colors.label"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "announcement"
      }
    ]
  }
}
{% endschema %}
